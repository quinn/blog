{"componentChunkName":"component---src-templates-blog-post-js","path":"/2014/08-22-analyzing-historical-apache-logs-piwik/","result":{"data":{"site":{"id":"Site","siteMetadata":{"title":"Quinn's Blog"}},"markdownRemark":{"id":"383036c6-8c25-536d-9a58-2d4f853925dc","excerpt":"There are various tools that provide log anaslysis for apache. Of the ones I was able to find piwik seemed like the best. it seems well maintaned and seemed toâ€¦","html":"<p>There are various tools that provide log anaslysis for apache. Of the ones I was able to find piwik seemed like the best. it seems well maintaned and seemed to support themy specific use case well.</p>\n<h3>Installation</h3>\n<p>The easiest way I found to install piwik was using Docker:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker run --name piwik -p=10000:80 -v=/mnt/piwik:/data quinn/piwik</code></pre></div>\n<h3>Import logs</h3>\n<p>Get your apache log file from where it is stored. Usually, it is in a\ndirectory such as <code class=\"language-text\">/var/log/httpd/access.log</code> or something similar. Given a\nfile named access.log, run this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker-enter piwik\n./import_logs.py --url=http://docker-002.tastehoneyco.com/ access.log --idsite=1 --recorders=2 --enable-http-errors --enable-http-redirects --enable-static --enable-bots</code></pre></div>\n<p>Now reindex the data:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">./console core:archive --force-all-websites --force-all-periods=315576000 --force-date-last-n=1000 --url=http://docker-002.tastehoneyco.com:10000/</code></pre></div>\n<p>Now navigate to the visits tab within the piwik interface and you should see\nall of the apache request logs.  Piwik provides great filtering and sorting\nfunctionality to help you find any unusual traffic. Next, you may want to\nemulate some nefarious traffic of your own. <a href=\"/blog/installing-metasploit-on-osx-with-rbenv\">Read our install guide for\nmetasploit</a>, a tool for finding\nand testing vulnurabilities in your infrastructure.</p>","fields":{"slug":"/2014/08-22-analyzing-historical-apache-logs-piwik/"},"frontmatter":{"title":"Analyzing historical apache log data using piwik","date":"August 22, 2014","description":"Sometimes tools like google analytics don't provide the insight you need and it can be helpful to go directly to the source: the log files.\n"}}},"pageContext":{"slug":"/2014/08-22-analyzing-historical-apache-logs-piwik/","previous":{"fields":{"slug":"/2014/08-17-installing-metasploit-on-osx-with-rbenv/"},"frontmatter":{"title":"Installing Metasploit on OS X with rbenv"}},"next":{"fields":{"slug":"/2014/08-30-prevent-brute-force-login-on-wordpress/"},"frontmatter":{"title":"Preventing brute-force attacks on Wordpress's wp-login.php"}}}}}