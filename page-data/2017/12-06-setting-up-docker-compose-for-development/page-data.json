{"componentChunkName":"component---src-templates-blog-post-js","path":"/2017/12-06-setting-up-docker-compose-for-development/","result":{"data":{"site":{"siteMetadata":{"title":"Quinn's Blog"}},"markdownRemark":{"id":"49b01c96-e9cf-5abd-9082-e15413955dc5","excerpt":"General project structure: From here, you can setup how the images should be built and how the containers should be run. Sharing files for development The most…","html":"<p>General project structure:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.\n├─ (app code)\n├─ containers\n|  └─ some.image.name\n|     └─ Dockerfile\n├─ docker-compose.yml\n└─ Dockerfile</code></pre></div>\n<p>From here, you can setup how the images should be built and how the containers should be run.</p>\n<h2>Sharing files for development</h2>\n<p>The most important thing for development is that the files to be edited are on the host and then mounted into the image. This way the usual development flow is not interrupted. Here is an example of how this is done:</p>\n<p><code class=\"language-text\">./Dockerfile</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">COPY . /app</code></pre></div>\n<p><code class=\"language-text\">./docker-compose.yml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">app-service</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> bind\n      <span class=\"token key atrule\">source</span><span class=\"token punctuation\">:</span> .\n      <span class=\"token key atrule\">target</span><span class=\"token punctuation\">:</span> /app</code></pre></div>\n<p>The important thing here is that the source and target match in the Dockerfile as well as the docker-compose.yml. This way you can fully build the image and still have the code available for development.</p>\n<h2>Building images specific to project</h2>\n<p>Another thing I like about docker-compose is reuse images and reference images that are part of your compose setup. For example, you could give an image a name in your <code class=\"language-text\">docker-compose.yml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">base</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> com.your<span class=\"token punctuation\">-</span>app.base\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span> ./containers/com.your<span class=\"token punctuation\">-</span>app.base\n<span class=\"token key atrule\">app-service</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span> .\n  <span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span> base</code></pre></div>\n<p>When the images are built Compose will label the images so they can be used in your <code class=\"language-text\">Dockerfile</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">FROM com.your-app.base</code></pre></div>\n<p>This allows you to create generalized configurations that are still local to the project.</p>\n<hr>\n<p>If you have any suggestions on how this could be improved or found any of this helpful please let me know, thank you!</p>","fields":{"slug":"/2017/12-06-setting-up-docker-compose-for-development/"},"frontmatter":{"title":"Setting up Docker Compose for Development","date":"December 06, 2017","description":"General project structure:"}}},"pageContext":{"slug":"/2017/12-06-setting-up-docker-compose-for-development/","previous":{"fields":{"slug":"/2014/09-15-change-rails-server-default-port/"},"frontmatter":{"title":"Change the default port that rails uses"}},"next":{"fields":{"slug":"/2019/02-10-simple-services-lambda/"},"frontmatter":{"title":"Create simple services for web clients using API Gateway, CloudFormation, and Lambda"}}}},"staticQueryHashes":["1091219763","63159454"]}